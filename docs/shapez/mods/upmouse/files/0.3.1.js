/*!
 * upmouse version 0.3.1
 *     source at https://github.com/EmeraldBlock/shapez.io-mods
 */(()=>{"use strict";const A={website:"https://emeraldblock.github.io/",author:"Emerald Block",name:"Drag, don't edit!",version:"0.3.1",id:"upmouse",description:"Dragging the map is prioritized over triggering stuff",minimumGameVersion:">=1.5.0",doesNotAffectSavegame:!0,extra:{authors:[{name:"Emerald Block",icon:"https://avatars.githubusercontent.com/u/69981203"}],changelog:{"0.3.1":["Added icon"],"0.3.0":["Fixed signal dialog opening twice"],"0.2.0":["Fixed mod not cleaning up when exiting save","Fixed triggering when placing, etc."],"0.1.0":["Initial release","Support for editing signals, toggling buttons, and interacting with markers"]},source:"https://github.com/EmeraldBlock/shapez.io-mods",readme:"<p>Tried to drag the map but accidentally clicked on something? Fear no more!</p>\n<p>This mod stops that. Instead of triggering when you press your mouse, things trigger when you release your mouse without moving.</p>\n<p>This affects editing signals, toggling buttons, and interacting with markers.</p>\n"}};A.extra.icon="data:image/webp;base64,UklGRmADAABXRUJQVlA4WAoAAAAgAAAA/wEA/wEASUNDUKACAAAAAAKgbGNtcwQwAABtbnRyUkdCIFhZWiAH5gAKAB0AAQAbACFhY3NwTVNGVAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA9tYAAQAAAADTLWxjbXMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA1kZXNjAAABIAAAAEBjcHJ0AAABYAAAADZ3dHB0AAABmAAAABRjaGFkAAABrAAAACxyWFlaAAAB2AAAABRiWFlaAAAB7AAAABRnWFlaAAACAAAAABRyVFJDAAACFAAAACBnVFJDAAACFAAAACBiVFJDAAACFAAAACBjaHJtAAACNAAAACRkbW5kAAACWAAAACRkbWRkAAACfAAAACRtbHVjAAAAAAAAAAEAAAAMZW5VUwAAACQAAAAcAEcASQBNAFAAIABiAHUAaQBsAHQALQBpAG4AIABzAFIARwBCbWx1YwAAAAAAAAABAAAADGVuVVMAAAAaAAAAHABQAHUAYgBsAGkAYwAgAEQAbwBtAGEAaQBuAABYWVogAAAAAAAA9tYAAQAAAADTLXNmMzIAAAAAAAEMQgAABd7///MlAAAHkwAA/ZD///uh///9ogAAA9wAAMBuWFlaIAAAAAAAAG+gAAA49QAAA5BYWVogAAAAAAAAJJ8AAA+EAAC2xFhZWiAAAAAAAABilwAAt4cAABjZcGFyYQAAAAAAAwAAAAJmZgAA8qcAAA1ZAAAT0AAACltjaHJtAAAAAAADAAAAAKPXAABUfAAATM0AAJmaAAAmZwAAD1xtbHVjAAAAAAAAAAEAAAAMZW5VUwAAAAgAAAAcAEcASQBNAFBtbHVjAAAAAAAAAAEAAAAMZW5VUwAAAAgAAAAcAHMAUgBHAEJWUDhMmQAAAC//wX8AJ6CQjSRo/UWWZKW+Ow3CbKPh7T2I8zc4gUAS7f4Gz3/8r0GwoABSI0mSpKFQFIJCURj+tHyu3a9F9H8CDv/zP//z/0+8mf/4795l/gO/R17mP9Bbbn2Z/8CvL/Mf+PVl/gO/vsx/4NeX+Q/wbt7bz7+T/8Bs+ZnPv5v/gGz55Nb5D+j68vl4/gO872+d/4Cv8x+wAQA=";const{Mod:e}=window.shapez,{Signal:t}=window.shapez,{Vector:i}=window.shapez,{Camera:n,enumMouseButton:o}=window.shapez,{HUDConstantSignalEdit:a}=window.shapez,{HUDLeverToggle:r}=window.shapez,{HUDWaypoints:s}=window.shapez,{KEYMAPPINGS:d}=window.shapez,h=Symbol("upmouseHandler"),c=Symbol("onUpmouse"),g=[o.left,o.middle,o.right];window.$shapez_registerMod(class extends e{constructor(...A){super(...A),this.symbols={upmouseHandler:h,onUpmouse:c}}init(){let A;n.prototype[c]=function(A){const{blueprintPlacer:e,buildingPlacer:t,massSelector:n}=this.root.hud.parts;this.isCurrentlyInteracting()||null!==e.currentBlueprint.get()||null!==t.currentMetaBuilding.get()||void 0!==n&&this.root.keyMapper.getBinding(d.massSelect.massSelectStart).pressed||this.root.camera[h].dispatch(new i(A.clientX,A.clientY),g[A.button])},this.modInterface.runBeforeMethod(n,"internalInitEvents",(function(){this[h]=new t,A=this[c].bind(this),this.root.canvas.addEventListener("mouseup",A)})),this.modInterface.runBeforeMethod(n,"cleanup",(function(){this.root.canvas.removeEventListener("mouseup",A),A=void 0})),this.modInterface.runAfterMethod(a,"initialize",(function(){this.root.camera.downPreHandler.remove(this.downPreHandler),this.root.camera[h].add(this.downPreHandler,this)})),this.modInterface.runAfterMethod(r,"initialize",(function(){this.root.camera.downPreHandler.remove(this.downPreHandler),this.root.camera[h].add(this.downPreHandler,this)})),this.modInterface.runAfterMethod(s,"initialize",(function(){this.root.camera.downPreHandler.remove(this.onMouseDown),this.root.camera[h].add(this.onMouseDown,this)}))}},A)})();
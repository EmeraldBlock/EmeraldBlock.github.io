/*!
 * upmouse version 0.3.0
 * source at https://github.com/EmeraldBlock/shapez.io-mods
 */(()=>{"use strict";const e={website:"https://emeraldblock.github.io/",author:"Emerald Block",name:"Drag, don't edit!",version:"0.3.0",id:"upmouse",description:"Dragging the map is prioritized over triggering stuff",minimumGameVersion:">=1.5.0",doesNotAffectSavegame:!0,extra:{authors:[{name:"Emerald Block",icon:"https://avatars.githubusercontent.com/u/69981203"}],changelog:{"0.3.0":["Fixed signal dialog opening twice"],"0.2.0":["Fixed mod not cleaning up when exiting save","Fixed triggering when placing, etc."],"0.1.0":["Initial release","Support for editing signals, toggling buttons, and interacting with markers"]},source:"https://github.com/EmeraldBlock/shapez.io-mods",readme:"<p>Tried to drag the map but accidentally clicked on something? Fear no more!</p>\n<p>This mod stops that. Instead of triggering when you press your mouse, things trigger when you release your mouse without moving.</p>\n<p>This affects editing signals, toggling buttons, and interacting with markers.</p>\n"}},{Mod:t}=window.shapez,{Signal:i}=window.shapez,{Vector:n}=window.shapez,{Camera:o,enumMouseButton:r}=window.shapez,{HUDConstantSignalEdit:s}=window.shapez,{HUDLeverToggle:a}=window.shapez,{HUDWaypoints:d}=window.shapez,{KEYMAPPINGS:h}=window.shapez,u=Symbol("upmouseHandler"),l=Symbol("onUpmouse"),c=[r.left,r.middle,r.right];window.$shapez_registerMod(class extends t{constructor(...e){super(...e),this.symbols={upmouseHandler:u,onUpmouse:l}}init(){let e;o.prototype[l]=function(e){const{blueprintPlacer:t,buildingPlacer:i,massSelector:o}=this.root.hud.parts;this.isCurrentlyInteracting()||null!==t.currentBlueprint.get()||null!==i.currentMetaBuilding.get()||void 0!==o&&this.root.keyMapper.getBinding(h.massSelect.massSelectStart).pressed||this.root.camera[u].dispatch(new n(e.clientX,e.clientY),c[e.button])},this.modInterface.runBeforeMethod(o,"internalInitEvents",(function(){this[u]=new i,e=this[l].bind(this),this.root.canvas.addEventListener("mouseup",e)})),this.modInterface.runBeforeMethod(o,"cleanup",(function(){this.root.canvas.removeEventListener("mouseup",e),e=void 0})),this.modInterface.runAfterMethod(s,"initialize",(function(){this.root.camera.downPreHandler.remove(this.downPreHandler),this.root.camera[u].add(this.downPreHandler,this)})),this.modInterface.runAfterMethod(a,"initialize",(function(){this.root.camera.downPreHandler.remove(this.downPreHandler),this.root.camera[u].add(this.downPreHandler,this)})),this.modInterface.runAfterMethod(d,"initialize",(function(){this.root.camera.downPreHandler.remove(this.onMouseDown),this.root.camera[u].add(this.onMouseDown,this)}))}},e)})();
/*!
 * upmouse version 1.0.1
 * source at https://github.com/EmeraldBlock/shapez.io-mods
 */(()=>{"use strict";const e={website:"https://emeraldblock.github.io/",author:"Emerald Block",name:"Drag, don't edit!",version:"1.0.1",id:"upmouse",description:"Dragging the map is prioritized over triggering stuff",minimumGameVersion:">=1.5.0",doesNotAffectSavegame:!0,extra:{authors:[{name:"Emerald Block",icon:"https://avatars.githubusercontent.com/u/69981203"}],changelog:{"1.0.1":["Fixed mod not cleaning up when exiting save","Fixed triggering when placing, etc."],"1.0.0":["Initial release","Support for editing signals, toggling buttons, and interacting with markers"]},source:"https://github.com/EmeraldBlock/shapez.io-mods",readme:"<p>Tried to drag the map but accidentally clicked on something? Fear no more!</p>\n<p>This mod stops that. Instead of triggering when you press your mouse, things trigger when you release your mouse without moving.</p>\n<p>This affects editing signals, toggling buttons, and interacting with markers.</p>\n"}},{Mod:t}=window.shapez,{Signal:n}=window.shapez,{Vector:i}=window.shapez,{Camera:o,enumMouseButton:r}=window.shapez,{HUDConstantSignalEdit:s}=window.shapez,{HUDLeverToggle:a}=window.shapez,{HUDWaypoints:d}=window.shapez,{KEYMAPPINGS:h}=window.shapez,u=Symbol("upmouse"),c=[r.left,r.middle,r.right];window.$shapez_registerMod(class extends t{constructor(...e){super(...e),this.symbols={upmouse:u}}init(){this.modInterface.runBeforeMethod(o,"internalInitEvents",(function(){this[u]=new n}));let e=!1;this.modInterface.runBeforeMethod(o,"onMouseUp",(function(){const{blueprintPlacer:t,buildingPlacer:n,massSelector:i}=this.root.hud.parts;return e=!(this.isCurrentlyInteracting()||null!==t.currentBlueprint.get()||null!==n.currentMetaBuilding.get()||void 0!==i&&this.root.keyMapper.getBinding(h.massSelect.massSelectStart).pressed),!1})),this.modInterface.runAfterMethod(o,"onMouseUp",(function(t){const n=t;return e&&this.root.camera[u].dispatch(new i(n.clientX,n.clientY),c[n.button]),!1})),this.modInterface.runAfterMethod(s,"initialize",(function(){this.root.camera.downPreHandler.remove(this.downPreHandler),this.root.camera[u].add(this.downPreHandler,this)})),this.modInterface.runAfterMethod(a,"initialize",(function(){this.root.camera.downPreHandler.remove(this.downPreHandler),this.root.camera[u].add(this.downPreHandler,this)})),this.modInterface.runAfterMethod(d,"initialize",(function(){this.root.camera.downPreHandler.remove(this.onMouseDown),this.root.camera[u].add(this.onMouseDown,this)}))}},e)})();